<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Memeplex - A Call from Ankyra</title>

  <!-- SEO Metadata -->
  <meta name="description" content="Memeplex: A message from the future.">
  <meta property="og:title" content="Memeplex - A Call from Ankyra">
  <meta property="og:description" content="A message from the future.">
  <meta property="og:image" content="beacon-01.webp">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://standardgalactic.github.io/memeplex.html">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="beacon-01.webp">

  <!-- Font Definitions + Global Styles -->
  <style>
    .content {
      white-space: pre-wrap; /* Preserve line breaks from the TXT file */
    }

    @font-face {
      font-family: "SGA";
      src: url("fonts/Sga-Regular.woff2") format("woff2"),
           url("fonts/Sga-Regular.woff") format("woff"),
           url("fonts/Sga-Regular.ttf") format("truetype");
    }
    @font-face {
      font-family: "CursiveGalactic";
      src: url("fonts/CursiveGalactic-Regular.ttf") format("truetype");
    }
    @font-face {
      font-family: "Courier";
      src: url("fonts/NovaMonoStandardGalactic.ttf") format("truetype");
    }
    @font-face {
      font-family: "Cheiro";
      src: url("fonts/Cheiro-Regular.woff2") format("woff2"),
           url("fonts/Cheiro-Regular.woff") format("woff"),
           url("fonts/Cheiro-Regular.ttf") format("truetype");
    }
    @font-face {
      font-family: "Clypto";
      src: url("fonts/Clypto-Regular.woff2") format("woff2"),
           url("fonts/Clypto-Regular.woff") format("woff"),
           url("fonts/Clypto-Regular.ttf") format("truetype");
    }
    @font-face {
      font-family: "LogicoPhilosophicus";
      src: url("fonts/Logico_philosophicus-Regular.ttf") format("truetype");
    }
    @font-face {
      font-family: "Shapeform";
      src: url("fonts/shapeform.ttf") format("truetype");
    }

    /* Global Styles */
    body {
      background-color: white;
      color: black;
      font-family: "SGA", sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    h1, h2, h3 {
      text-align: center;
      margin: 0.5em 0;
    }

    h1 {
      font-size: 3rem;
      margin-top: 0;
    }

    .content {
      max-width: 80%;
      text-align: left;
      line-height: 1.6;
      font-size: 1rem;
      padding: 20px;
      border: 2px solid black;
      border-radius: 10px;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin-top: 1rem;
    }

    .audio-player {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
      padding: 20px;
      width: 80%;
      max-width: 600px;
    }

    audio {
      width: 100%;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
      gap: 0.5rem;
    }

    .controls button,
    .controls label {
      background-color: black;
      color: white;
      border: none;
      padding: 10px 20px;
      font-family: "Courier New", Courier, monospace;
      font-size: 0.9rem;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .controls button:hover {
      background-color: grey;
    }

    /* Dark Mode */
    .dark-mode {
      background-color: black;
      color: white;
    }

    .dark-mode .content {
      border-color: white;
    }

    .dark-mode .controls button,
    .dark-mode .controls label {
      background-color: white;
      color: black;
    }

    footer {
      margin-top: 30px;
      text-align: center;
      font-size: 0.9rem;
    }

    footer a {
      color: black;
      text-decoration: none;
    }

    .dark-mode footer a {
      color: white;
    }

    /* Invert the header image ONLY when NOT in dark mode */
    body:not(.dark-mode) #headerImage {
      filter: invert(1);
    }
  </style>
</head>

<body class="dark-mode"><!-- Start dark mode by default -->
  <h1>Memeplex</h1>
  <h2>A Call from Ankyra</h2>

  <!-- Header Image -->
  <img id="headerImage" alt="Header Beacon" style="max-width: 100%; height: auto;">

  <!-- Dynamic Text Content -->
  <div class="content" id="textContent">
    <p>Loading content...</p>
  </div>

  <div class="audio-player">
    <audio controls>
      <source src="Rappers-caught-flexing.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>

  <div class="controls">
    <!-- Font Switching Buttons -->
    <button onclick="setFont('SGA')">SGA</button>
    <button onclick="setFont('CursiveGalactic')">Cursive Galactic</button>
    <button onclick="setFont('Cheiro')">Cheiro</button>
    <button onclick="setFont('Clypto')">Clypto</button>
    <button onclick="setFont('LogicoPhilosophicus')">Logico Philosophicus</button>
    <button onclick="setFont('Shapeform')">Shapeform</button>
    <button onclick="setFont('Courier')">Courier (Nova Mono)</button>

    <!-- Dark Mode Toggle -->
    <label>
      <input type="checkbox" id="darkModeToggle" checked> Dark Mode
    </label>
  </div>

  <br>

    <!-- Input to pick a text file from local computer -->
    <label for="localFile">
      <span
class="load-local-file" 
style="background-color: black; color: white; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
        Load Local Text
      </span>
    </label>
    <input
      type="file"
      id="localFile"
      accept=".txt"
      style="display: none;"
    />
  </div>
  

  <footer>
    <p>This project is open source.</p>
    <p>You can find the source code for this project
      <a href="https://github.com/standardgalactic/standardgalactic.github.io/blob/main/memeplex.html">here</a>.
    </p>
  </footer>

  <!-- Script for rotating beacon images -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const beaconImages = [
        "beacon-01.webp",
        "beacon-03.webp",
        "beacon-05.webp",
        "beacon-07.webp",
        "beacon-09.webp",
        "beacon-02.webp",
        "beacon-04.webp",
        "beacon-06.webp",
        "beacon-08.webp"
      ];

      const epochStart = new Date("1970-01-01T00:00:00Z");
      const now = new Date();
      const dayCount = Math.floor((now.getTime() - epochStart.getTime()) / (1000 * 60 * 60 * 24));
      const index = dayCount % beaconImages.length;

      const headerImg = document.getElementById("headerImage");
      headerImg.src = beaconImages[index];
    });
  </script>

  <!-- Script for loading text file + font toggle + dark mode toggle -->
  <script>
    // Fetch and display content from message.txt by default
    fetch('message.txt')
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not OK');
        }
        return response.text();
      })
      .then(text => {
        document.getElementById('textContent').textContent = text;
      })
      .catch(error => {
        document.getElementById('textContent').textContent =
          'Error loading content: ' + error.message;
      });

    // Function to set font
    function setFont(font) {
      const elements = document.querySelectorAll('.content, footer, .load-local-file, h1, h2');
      if (font === 'Courier') {
        // Example smaller scaling for Courier
        elements.forEach(el => {
          el.style.fontFamily = font;
          el.style.fontSize = '85%';
        });
      } else {
        elements.forEach(el => {
          el.style.fontFamily = font;
          el.style.fontSize = '100%';
        });
      }
    }

    // Dark mode toggle
    document.getElementById('darkModeToggle').addEventListener('change', function() {
      document.body.classList.toggle('dark-mode');
    });

// Load a local text file via <input type="file">
    document.getElementById('localFile').addEventListener('change', function() {
      const file = this.files && this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('textContent').textContent = e.target.result;
        };
        reader.readAsText(file);
      }
    });
  </script>
</body>
</html>
